import{a as T,b as S,c as I,d as y,e as D,f as G,g as v,h as w,i as M,j as E,k as R,n as me,o as pe,q as ue,r as de,s as ce,t as fe,u as be,v as he,w as A}from"./chunk-EUZKLQQM.js";import{Ba as N,Ca as z,Ea as U,Fa as J,Ha as K,Hb as oe,Ia as W,Ib as le,Ja as u,Ka as n,L as h,La as a,Ma as m,Na as X,O as V,Oa as Y,P as O,Pb as re,Qa as d,Ra as c,Rb as se,Ta as Z,Tb as x,Va as ee,Wa as C,Z as j,_ as B,fb as te,ha as r,ib as o,jb as b,nb as ie,ob as _,pb as g,qa as f,sb as ae,ta as Q,va as s,vb as ne}from"./chunk-G42PXAGX.js";var k=class e{userInput=j({org:"angular",repo:"components"});userInputForm=be(this.userInput,t=>{A(t.repo,300),A(t.org,300)});constructor(){let t=h(x);B(async()=>{let i=this.userInput();await t.navigate([],{queryParams:i,queryParamsHandling:"merge"})})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=f({type:e,selectors:[["app-github-filters"]],hostAttrs:[1,"flex","gap-2"],decls:8,vars:4,consts:[[1,"flex-1"],["matInput","","type","text","placeholder","Org name",3,"field"],["matInput","","type","text","placeholder","Repo name",3,"field"]],template:function(i,l){i&1&&(n(0,"mat-form-field",0)(1,"mat-label"),o(2,"Organization"),a(),m(3,"input",1),N(),a(),n(4,"mat-form-field",0)(5,"mat-label"),o(6,"Repository"),a(),m(7,"input",2),N(),a()),i&2&&(r(3),z(l.userInputForm.org,"field"),r(4),z(l.userInputForm.repo,"field"))},dependencies:[ue,pe,fe,he],encapsulation:2})};var F=class e{transform(t){if(!/^([0-9A-Fa-f]{6})$/.test(t))return t;let i=255-parseInt(t.slice(0,2),16),l=255-parseInt(t.slice(2,4),16),p=255-parseInt(t.slice(4,6),16);return((1<<24)+(i<<16)+(l<<8)+p).toString(16).slice(1).toUpperCase()}static \u0275fac=function(i){return new(i||e)};static \u0275pipe=Q({name:"inverseColor",type:e,pure:!0})};var ge=(e,t)=>t.name;function Ce(e,t){if(e&1&&(X(0,"span",1),_(1,"inverseColor"),o(2),Y()),e&2){let i=t.$implicit;te("background-color","#"+i.color)("color","#"+g(1,5,i.color)),r(2),b(i.name)}}var L=class e{labels=ne.required();static \u0275fac=function(i){return new(i||e)};static \u0275cmp=f({type:e,selectors:[["app-github-labels"]],hostAttrs:[1,"flex","flex-wrap","gap-1"],inputs:{labels:[1,"labels"]},decls:2,vars:0,consts:[[1,"px-2","rounded-full","text-nowrap",3,"background-color","color"],[1,"px-2","rounded-full","text-nowrap"]],template:function(i,l){i&1&&K(0,Ce,3,7,"span",0,ge),i&2&&W(l.labels())},dependencies:[F],encapsulation:2})};function Te(e,t){e&1&&(n(0,"th",10),o(1,"ID"),a())}function Se(e,t){e&1&&(n(0,"td",11)(1,"div",12),o(2,"\xA0"),a()())}function Ie(e,t){e&1&&(n(0,"th",10),o(1,"Created"),a())}function ye(e,t){e&1&&(n(0,"td",13)(1,"div",12),o(2,"\xA0"),a()())}function De(e,t){e&1&&(n(0,"th",10),o(1,"Title"),a())}function Ge(e,t){e&1&&(n(0,"td",11)(1,"div",12),o(2,"\xA0"),a()())}function ve(e,t){e&1&&(n(0,"th",10),o(1,"Labels"),a())}function we(e,t){e&1&&(n(0,"td",11)(1,"div",12),o(2,"\xA0"),a()())}function Me(e,t){e&1&&m(0,"tr",14)}function Ee(e,t){e&1&&m(0,"tr",15)}var H=class e{cols=["id","created_at","title","labels"];items=Array.from({length:10},()=>({}));static \u0275fac=function(i){return new(i||e)};static \u0275cmp=f({type:e,selectors:[["app-github-table-skeleton"]],decls:15,vars:3,consts:[["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","created_at"],["mat-cell","","class","text-nowrap",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","labels"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"skeleton"],["mat-cell","",1,"text-nowrap"],["mat-header-row",""],["mat-row",""]],template:function(i,l){i&1&&(n(0,"table",0),d(1,1),s(2,Te,2,0,"th",2)(3,Se,3,0,"td",3),c(),d(4,4),s(5,Ie,2,0,"th",2)(6,ye,3,0,"td",5),c(),d(7,6),s(8,De,2,0,"th",2)(9,Ge,3,0,"td",3),c(),d(10,7),s(11,ve,2,0,"th",2)(12,we,3,0,"td",3),c(),s(13,Me,1,0,"tr",8)(14,Ee,1,0,"tr",9),a()),i&2&&(u("dataSource",l.items),r(13),u("matHeaderRowDef",l.cols),r(),u("matRowDefColumns",l.cols))},dependencies:[R,T,I,v,y,S,w,D,G,M,E],encapsulation:2})};var Re=()=>[30];function ke(e,t){e&1&&m(0,"app-github-table-skeleton")}function Pe(e,t){if(e&1&&(n(0,"p",1),o(1,"An error occurred:"),a(),n(2,"div")(3,"pre"),o(4),_(5,"json"),a()()),e&2){let i=C();r(4),b(g(5,1,i.issues.error()))}}function Fe(e,t){e&1&&(n(0,"p"),o(1,"No issues found..."),a())}function Le(e,t){e&1&&(n(0,"th",14),o(1,"ID"),a())}function He(e,t){if(e&1&&(n(0,"td",15),o(1),a()),e&2){let i=t.$implicit;r(),b(i.id)}}function Ne(e,t){e&1&&(n(0,"th",14),o(1,"Created"),a())}function ze(e,t){if(e&1&&(n(0,"td",16),o(1),_(2,"date"),a()),e&2){let i=t.$implicit;r(),b(g(2,1,i.created_at))}}function Ae(e,t){e&1&&(n(0,"th",14),o(1,"Title"),a())}function $e(e,t){if(e&1&&(n(0,"td",15),o(1),a()),e&2){let i=t.$implicit;r(),b(i.title)}}function qe(e,t){e&1&&(n(0,"th",14),o(1,"Labels"),a())}function Ve(e,t){if(e&1&&(n(0,"td",15),m(1,"app-github-labels",17),a()),e&2){let i=t.$implicit;r(),u("labels",i.labels)}}function Oe(e,t){e&1&&m(0,"tr",18)}function je(e,t){e&1&&m(0,"tr",19)}function Be(e,t){if(e&1){let i=Z();n(0,"div",2)(1,"table",3),d(2,4),s(3,Le,2,0,"th",5)(4,He,2,1,"td",6),c(),d(5,7),s(6,Ne,2,0,"th",5)(7,ze,3,3,"td",8),c(),d(8,9),s(9,Ae,2,0,"th",5)(10,$e,2,1,"td",6),c(),d(11,10),s(12,qe,2,0,"th",5)(13,Ve,2,1,"td",6),c(),s(14,Oe,1,0,"tr",11)(15,je,1,0,"tr",12),a()(),n(16,"mat-paginator",13),ee("page",function(p){V(i);let _e=C();return O(_e.pageChange(p))}),a()}if(e&2){let i,l,p=C();r(),u("dataSource",p.items()),r(13),u("matHeaderRowDef",p.cols),r(),u("matRowDefColumns",p.cols),r(),u("pageSizeOptions",ie(8,Re))("hidePageSize",!0)("length",p.issues.value().total_count)("pageIndex",((i=p.params())==null?null:i.pageIndex)||0)("pageSize",((l=p.params())==null?null:l.pageSize)||5)}}function Qe(e,t){e&1&&(n(0,"p"),o(1,"Make sure you enter an organization and repository."),a())}var q=class e{router=h(x);cols=["id","created_at","title","labels"];params=ce(h(se).queryParams);issues=re(()=>{let t=this.params();if(!t?.org||!t?.repo)return;let i=new URLSearchParams;return i.set("q",`repo:${t.org}/${t.repo}`),i.set("page",(parseInt(t.page??"0")+1).toString()),`https://api.github.com/search/issues?${i.toString()}`});items=ae(()=>this.issues.hasValue()?this.issues.value().items:[]);pageChange(t){return this.update({page:t.pageSize})}update(t){return this.router.navigate([],{queryParams:t,queryParamsHandling:"merge"})}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=f({type:e,selectors:[["app-main-table"]],decls:7,vars:1,consts:[[1,"shadow-lg","rounded-lg","overflow-y-auto"],[1,"text-red-600"],[2,"max-height","calc(100vh - 15rem)","overflow-y","auto"],["mat-table","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","created_at"],["mat-cell","","class","text-nowrap",4,"matCellDef"],["matColumnDef","title"],["matColumnDef","labels"],["mat-header-row","","style","position: sticky",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of items",3,"page","pageSizeOptions","hidePageSize","length","pageIndex","pageSize"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"text-nowrap"],[3,"labels"],["mat-header-row","",2,"position","sticky"],["mat-row",""]],template:function(i,l){i&1&&(n(0,"div",0),m(1,"app-github-filters"),U(2,ke,1,0,"app-github-table-skeleton")(3,Pe,6,3)(4,Fe,2,0,"p")(5,Be,17,9)(6,Qe,2,0,"p"),a()),i&2&&(r(2),J(l.issues.isLoading()?2:l.issues.error()?3:l.issues.hasValue()&&l.items().length===0?4:l.issues.hasValue()&&l.items().length>0?5:6))},dependencies:[R,T,I,v,y,S,w,D,G,M,E,me,k,L,de,H,le,oe],styles:["th[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#fff;z-index:1}"]})},Ct=q;export{q as GithubIssuesTable,Ct as default};
